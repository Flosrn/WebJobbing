{"version":3,"sources":["../../src/pages/myrequest/myrequest.module.ts","../../src/models/profile/profile.interface.ts","../../src/pages/myrequest/myrequest.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MyrequestPage } from './myrequest';\n\n@NgModule({\n  declarations: [\n    MyrequestPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MyrequestPage),\n  ],\n})\nexport class MyrequestPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/myrequest/myrequest.module.ts","\r\nexport class Profile {\r\n    uid?: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    dateOfBirth: any;\r\n    job: string;\r\n    location: string;\r\n    avatar: string;\r\n    cover: string;\r\n    description: string;\r\n    knowledgeNumber: number;\r\n    knowledges: string;\r\n    opinion: string;\r\n    jobberStatut: boolean;\r\n    userPermission : number;\r\n    requestPost: number;\r\n    workDone: number;\r\n    commentPost: number;\r\n    date: any;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/profile/profile.interface.ts","import { Component, Output, EventEmitter, Input } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { RequestListService } from '../../providers/request/request-list.services';\nimport { Observable } from 'rxjs/Observable';\nimport { Request } from '../../models/request/request.model';\nimport { Profile } from '../../models/profile/profile.interface';\nimport { ToastService2 } from './../../providers/toast/toast.services';\nimport { DataService } from '../../providers/data/data.service';\nimport { Subscription } from 'rxjs/Subscription';\nimport { User } from 'firebase/app';\nimport { AuthService } from '../../providers/auth/auth.service';\n\n@IonicPage()\n@Component({\n  selector: 'page-myrequest',\n  templateUrl: 'myrequest.html',\n})\nexport class MyrequestPage {\n  \n  requestList$ = [];\n  profileList$: Observable<Profile[]>;\n  \n  public request: any;\n  \n  private authenticatedUser$: Subscription;\n  private authenticatedUser: User;\n  \n  //private authUser: User;\n  public userProfile: Profile;\n  // private loader: Loading;\n  \n  @Output() existingProfile: EventEmitter<Profile>;\n  @Input() profile: Profile;\n\n  showContainer: boolean = true;\n  \n  constructor(\n    public navCtrl: NavController,  \n    public navParams: NavParams,\n    private requests: RequestListService, \n    private toast: ToastService2,\n    public modalCtrl: ModalController,\n    private data: DataService,\n    private auth: AuthService, \n  ) {\n    \n    this.existingProfile = new EventEmitter<Profile>();\n    \n    this.authenticatedUser$ = this.auth.getAuthenticatedUser().subscribe((user: User) => {\n      this.authenticatedUser = user; \n    })\n    \n    this.profile = {} as Profile;\n    \n    this.requests.getRequestListRef().once('value').then(snap => {\n      snap.forEach(element => {  \n        data.getUid(element.val().uidProfile).valueChanges().subscribe(c => {\n          let userRequest = element.val();  \n          userRequest['uidRequest'] = element.key;\n          userRequest['userRequest'] = c;\n          // Affiche seulement les requests de l'utilisateur connectÃ©\n          if(userRequest.uidProfile ==  this.userProfile.uid) {\n            this.showContainer = false;\n            this.requestList$.push(userRequest);\n          }\n        });\n      });\n    });\n  }\n    \n  ngOnInit(): void {  \n    this.auth.getAuthenticatedUser().subscribe((user: User) => {\n      this.data.getProfile(user).valueChanges().subscribe((profile: Profile) => {\n        this.userProfile = <Profile>profile;\n        this.userProfile.uid = user.uid; \n        this.existingProfile.emit(this.userProfile);\n      })\n    })\n  }\n  \n  // Refresh\n  doRefresh(refresher) {\n    setTimeout(() => {\n      refresher.complete();\n    }, 2000); \n  }\n  \n  // Ouverture du modal \n  openModal(request) { \n    let modal = this.modalCtrl.create('RequestModalPage', {request: request} , { cssClass: 'inset-modal' });\n    modal.present();\n    modal.onDidDismiss(data => console.log(data));\n  } \n  \n  goToUserProfilePage() {\n    this.navCtrl.push('UserProfilePage');\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/myrequest/myrequest.ts"],"sourceRoot":""}